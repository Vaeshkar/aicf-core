graph TB
    subgraph "INPUT SOURCES"
        A1[Warp Terminal<br/>SQLite Database]
        A2[Augment VSCode<br/>LevelDB Files]
        A3[Manual AICF Files]
        A4[Session Dumps]
    end
    
    subgraph "UNIVERSAL EXTRACTOR ðŸ†•"
        B1[WarpParser<br/>SQLite Extraction]
        B2[AugmentParser<br/>LevelDB Parsing]
        B3[BackupManager<br/>Data Loss Prevention]
        B4[Quality Assessment<br/>9/10 Warp, 7/10 Augment]
    end
    
    subgraph "AICF TRANSFORMATION"
        C1[Raw â†’ AICF 3.0<br/>Structured Conversion]
        C2{Data Valid?}
        C3[Metadata Enhancement<br/>Context Inference]
        C4[Message Classification<br/>ðŸ†• Smart Typing]
        C5[Quality Scoring<br/>ðŸ†• Confidence Metrics]
    end
    
    subgraph "ENHANCED MARKDOWN GENERATION ðŸ”¥"
        D1[Session Classification<br/>ðŸ†• Context-Aware Intelligence]
        D2[Content Analysis<br/>ðŸ†• Work + Problems + Decisions]
        D3[Evidence Extraction<br/>ðŸ†• Problem-Solution Links]
        D4[Code Change Detection<br/>ðŸ†• File Context Awareness]
    end
    
    subgraph "INTELLIGENT DOCUMENTATION ðŸ“„"
        E1[conversation-log.md<br/>ðŸ†• Specific Work Items]
        E2[problem-solutions.md<br/>ðŸ†• Evidence-Based Fixes]
        E3[code-patterns.md<br/>ðŸ†• Development Context]
        E4[next-steps.md<br/>ðŸ†• Session-Type Aware]
        E5[technical-decisions.md<br/>ðŸ†• Rationale + Confidence]
    end
    
    subgraph "QUALITY FEEDBACK ðŸ“Š"
        F1[10x Improvement<br/>Generic â†’ Specific]
        F2[Context Intelligence<br/>Template â†’ Evidence-Based]
        F3[Developer Experience<br/>Actionable Documentation]
    end

    %% Main Extraction Flow
    A1 --> B1
    A2 --> B2
    A3 --> B3
    A4 --> B3
    
    %% Quality Assessment
    B1 --> B4
    B2 --> B4
    B3 --> B4
    
    %% AICF Transformation
    B1 --> C1
    B2 --> C1
    B3 --> C1
    B4 --> C1
    
    C1 --> C2
    C2 -->|Valid| C3
    C2 -->|Invalid| C4
    C3 --> C4
    C4 --> C5
    C5 --> D1
    
    %% Enhanced Markdown Generation
    D1 --> D2
    D2 --> D3
    D3 --> D4
    
    %% Intelligent Documentation Output
    D1 --> E1
    D2 --> E1
    D2 --> E2
    D3 --> E2
    D4 --> E3
    D1 --> E4
    D2 --> E5
    
    %% Quality Feedback Loop
    E1 --> F1
    E2 --> F2
    E3 --> F2
    E4 --> F3
    E5 --> F3
    
    %% Data Loss Prevention
    B3 -->|Bulletproof Backup| A1
    B3 -->|Bulletproof Backup| A2
    
    %% Styling
    classDef source fill:#e3f2fd,stroke:#1976d2
    classDef extractor fill:#f3e5f5,stroke:#7b1fa2
    classDef transform fill:#fff3e0,stroke:#f57c00
    classDef enhance fill:#ffebee,stroke:#d32f2f,stroke-width:3px
    classDef docs fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef quality fill:#fff8e1,stroke:#fbc02d
    
    class A1,A2,A3,A4 source
    class B1,B2,B3,B4 extractor
    class C1,C2,C3,C4,C5 transform
    class D1,D2,D3,D4 enhance
    class E1,E2,E3,E4,E5 docs
    class F1,F2,F3 quality
